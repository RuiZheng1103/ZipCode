package com.rui.zipcode;

import java.util.ArrayList;
import java.util.List;

public class ZipCodePreProcess {

	public List<int[]> generateZipCodeArray(String zipcodeString) {
		String[] zipcodeIntervals = zipcodeString.split(" ");
		
		List<int[]> zipcodeArray = new ArrayList<int[]>();
		for (int i = 0; i < zipcodeIntervals.length; i++) {
			zipcodeArray.add(validateZipCode(zipcodeIntervals[i]));
		}
		return zipcodeArray;
	}
	
	private int[] validateZipCode(String zipcodeInterval) {
		String[] zipcodeComb = zipcodeInterval.replaceAll("\\[\\]", "").split(",");
		
		// ZipCode Pair Check
		if (zipcodeComb.length != 2)
			throw new IllegalArgumentException("Missing ZipCode");
		
		int[] zipcodePair = new int[2];
		for (int i = 0; i < zipcodeComb.length; i++) {
			int zipcodeNumber = Integer.parseInt(zipcodeComb[i]);
			
			// ZipCode length check
			if ((int) (Math.log10(zipcodeNumber) + 1) != 5)
				throw new IllegalArgumentException("Invalid length of ZipCode");
	
			zipcodePair[i] = zipcodeNumber;
		}
		
		// ZipCode Value Check
		if (zipcodePair[0] > zipcodePair[1])
			throw new IllegalArgumentException("Invalid ZipCode Pair");
		
		return zipcodePair;
		
	}
}
